<form hx-post="{{ url_for('products_app.create') }}"
      hx-swap="outerHTML">
    <div>
        <label for="product-name">Product name: </label>
        <input type="text" id="product-name" name="product-name" value="{{ product_name }}" required>
    </div>
    <div>
        <label for="product-price"> Product price: </label>
        <input type="number" id="product-price" name="product-price" min="1" max="99999" required>
    </div>
    {% if error %}
        <div style="color: crimson">{{ error }}</div>
    {% endif %}
    <button type="submit">Add</button>

    <script type="text/javascript">
        document.addEventListener("DOMContentLoaded", (event) => {
            document.body.addEventListener('htmx:beforeSwap', function (evt) {
                if (evt.detail.xhr.status === 422) {
                    // allow 422 responses to swap as we are using this as a signal
                    // that a form was submitted with bad data and want to rerender with the errors
                    //
                    // set isError to 'false' to avoid error logging in console
                    evt.detail.shouldSwap = true;
                    evt.detail.isError = false;
                }
            });
        });
    </script>
</form>